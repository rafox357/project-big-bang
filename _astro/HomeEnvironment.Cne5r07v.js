import{j as e}from"./jsx-runtime.PRPpl5vZ.js";import{r as n,R as f}from"./index.RYns6xqu.js";import{u as d,M as v,C as b,O as w,b as j}from"./OrbitControls.zd0-FmQl.js";import{T as P}from"./Text.DsjkOTRh.js";const R=n.forwardRef(({children:o,enabled:s=!0,speed:t=1,rotationIntensity:r=1,floatIntensity:i=1,floatingRange:a=[-.1,.1],autoInvalidate:l=!1,...y},M)=>{const c=n.useRef(null);n.useImperativeHandle(M,()=>c.current,[]);const g=n.useRef(Math.random()*1e4);return d(x=>{var u,p;if(!s||t===0)return;l&&x.invalidate();const m=g.current+x.clock.getElapsedTime();c.current.rotation.x=Math.cos(m/4*t)/8*r,c.current.rotation.y=Math.sin(m/4*t)/8*r,c.current.rotation.z=Math.sin(m/4*t)/20*r;let h=Math.sin(m/4*t)/10;h=v.mapLinear(h,-.1,.1,(u=a?.[0])!==null&&u!==void 0?u:-.1,(p=a?.[1])!==null&&p!==void 0?p:.1),c.current.position.y=h*i,c.current.updateMatrix()}),n.createElement("group",y,n.createElement("group",{ref:c,matrixAutoUpdate:!1},o))});function E({position:o=[0,0,0],rotation:s=[0,0,0]}){const t=n.useMemo(()=>({wall:new j({color:"#1a1b26"}),floor:new j({color:"#13151a"})}),[]);return e.jsxs("group",{position:o,rotation:s,children:[e.jsxs("mesh",{position:[0,-2,0],rotation:[-Math.PI/2,0,0],children:[e.jsx("planeGeometry",{args:[10,10]}),e.jsx("primitive",{object:t.floor,attach:"material"})]}),e.jsxs("mesh",{position:[-5,0,0],rotation:[0,Math.PI/2,0],children:[e.jsx("planeGeometry",{args:[10,4]}),e.jsx("primitive",{object:t.wall,attach:"material"})]}),e.jsxs("mesh",{position:[5,0,0],rotation:[0,-Math.PI/2,0],children:[e.jsx("planeGeometry",{args:[10,4]}),e.jsx("primitive",{object:t.wall,attach:"material"})]}),e.jsxs("mesh",{position:[0,0,-5],children:[e.jsx("planeGeometry",{args:[10,4]}),e.jsx("primitive",{object:t.wall,attach:"material"})]})]})}const G=f.memo(()=>e.jsx("sphereGeometry",{args:[.3,16,16]}));function I({position:o,name:s,type:t,status:r="online"}){const[i,a]=n.useState(!1),l=n.useMemo(()=>{switch(r){case"online":return"#22c55e";case"warning":return"#eab308";case"offline":return"#ef4444";default:return"#6b7280"}},[r]);return e.jsx("group",{position:o,children:e.jsxs(R,{speed:2,rotationIntensity:.2,floatIntensity:.5,children:[e.jsxs("mesh",{onPointerOver:()=>a(!0),onPointerOut:()=>a(!1),children:[e.jsx(G,{}),e.jsx("meshStandardMaterial",{color:l,emissive:l,emissiveIntensity:i?.5:.2})]}),e.jsx(P,{position:[0,.5,0],fontSize:.3,color:"white",anchorX:"center",anchorY:"middle",children:s})]})})}const A=f.memo(({count:o=20})=>{const s=n.useRef(),t=n.useMemo(()=>{const r=new Float32Array(o*3);for(let i=0;i<o;i++)r[i*3]=(Math.random()-.5)*10,r[i*3+1]=(Math.random()-.5)*10,r[i*3+2]=(Math.random()-.5)*10;return r},[o]);return d(({clock:r})=>{const i=r.getElapsedTime(),a=s.current.geometry.attributes.position.array;for(let l=0;l<a.length;l+=3)a[l+1]=Math.sin(i+l)*2;s.current.geometry.attributes.position.needsUpdate=!0}),e.jsxs("points",{ref:s,children:[e.jsx("bufferGeometry",{children:e.jsx("bufferAttribute",{attach:"attributes-position",count:t.length/3,array:t,itemSize:3})}),e.jsx("pointsMaterial",{size:.05,color:"#3b82f6",transparent:!0,opacity:.6,sizeAttenuation:!0})]})});function O(){const o=n.useMemo(()=>[{name:"Hub",position:[0,0,0],type:"hub",status:"online"},{name:"Living Room",position:[-2,1,-2],type:"sensor",status:"online"},{name:"Kitchen",position:[2,1,-2],type:"sensor",status:"warning"},{name:"Bedroom",position:[-2,1,2],type:"controller",status:"online"},{name:"Office",position:[2,1,2],type:"controller",status:"offline"}],[]);return e.jsxs(b,{camera:{position:[8,8,8],fov:50},dpr:[1,2],performance:{min:.5},children:[e.jsx("ambientLight",{intensity:.5}),e.jsx("pointLight",{position:[10,10,10],intensity:.5}),e.jsx("spotLight",{position:[0,10,0],angle:.5,penumbra:1,intensity:.5}),e.jsxs(f.Suspense,{fallback:null,children:[e.jsx(E,{}),o.map((s,t)=>e.jsx(I,{...s},t)),e.jsx(A,{})]}),e.jsx(w,{minPolarAngle:Math.PI/4,maxPolarAngle:Math.PI/2,minDistance:5,maxDistance:15,enableDamping:!0,dampingFactor:.05})]})}export{O as HomeEnvironment};
